# HISTFILESIZE=10000

#export EDITOR="$HOME/bin/mate -w"

alias slt='open -a "Sublime Text 2" --args --new-window'
alias ffmpeg="/Applications/ffmpegX.app/Contents/Resources/ffmpeg"

function te ()
{
	tail -f /var/log/apache2/error_log \
	| perl -ne \
		'($timeStamp, $error, $hostName, $message) =
			/^\[([^\]]+)\] \[([^\]]+)\] (?:\[client ([^\]]+)\])?\s*(.*)$/i; # Parse log
		 ($day, $month, $date, $time, $year) =
			$timeStamp =~ m/(\S*) (\S*) (\S*) (\S*) (\S*)$/; # Extract the timestamp
		$message =~ s/, referer: (.*)$/\./;  # Strip the referer references
		$message =~ s/\\n/\n/g; # Replace literal new lines to expand object dumps
		print $time . " " . $date . " " . $month . " | " . $message ."\n";'
}


function go { subl .; open http://localhost/~`whoami`/`basename \`pwd\``/htdocs; }

# git helpers

# aliasey kinda things
function gstart { git clone --recursive git@bitbucket.org:Squareweave/$@.git ~/Sites/$@; }
alias gsubup='git submodule --quiet update --init --recursive'
alias gfixsub='git submodule foreach --recursive git checkout master && git submodule foreach --recursive git pull'
alias update_satis=' ssh squareweave-anchor php /home/squareweave/dev/satis/bin/satis -n build /home/squareweave/dev/satis/squareweave.composer.json /home/squareweave/dev/satis/build'

function hira {

	if [ ! -f "$HOME/dev/scripts/hira.sh" ]
	then
		echo "Hira not found at $HOME/dev/scripts/hira.sh. No coffee for you"
		echo " "
		echo "To get it, clone the Squareweave scripts repo:"
		echo "  git clone git@bitbucket.org:Squareweave/scripts.git ~/dev/scripts"
		echo " "
		return
	fi

	# for the throw command, change directory too.
	$HOME/dev/scripts/hira.sh "$@"
	if [ "$1" = "throw" ]
	then
		cd "$HOME/Sites/$2"
	fi
}

# export PATH="/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/texbin:/Users/luke/bin:/usr/local/texlive/2010/bin/universal-darwin/"

export PATH="~/bin:$PATH"

##
# MacPorts Installer addition on 2012-03-21_at_08:54:06: adding an appropriate PATH variable for use with MacPorts.
export PATH=/opt/local/bin:/opt/local/sbin:$PATH
# Finished adapting your PATH environment variable for use with MacPorts.

if [ -f `brew --prefix`/etc/bash_completion ]; then
  . `brew --prefix`/etc/bash_completion
fi
