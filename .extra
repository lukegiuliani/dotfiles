# HISTFILESIZE=10000

#export EDITOR="$HOME/bin/mate -w"

function te ()
{
	tail -f /var/log/apache2/error_log \
	| perl -ne \
		'($timeStamp, $error, $hostName, $message) = 
			/^\[([^\]]+)\] \[([^\]]+)\] (?:\[client ([^\]]+)\])?\s*(.*)$/i; # Parse log
		 ($day, $month, $date, $time, $year) = 
			$timeStamp =~ m/(\S*) (\S*) (\S*) (\S*) (\S*)$/; # Extract the timestamp
		$message =~ s/, referer: (.*)$/\./;  # Strip the referer references
		$message =~ s/\\n/\n/g; # Replace literal new lines to expand object dumps
		print $time . " " . $date . " " . $month . " | " . $message ."\n";'
}


alias update_satis=' ssh squareweave-anchor php /home/squareweave/dev/satis/bin/satis -n build /home/squareweave/dev/satis/squareweave.composer.json /home/squareweave/dev/satis/build'

function hira {

	if [ ! -f "$HOME/dev/scripts/hira.sh" ]
	then
		echo "Hira not found at $HOME/dev/scripts/hira.sh. No coffee for you"
		echo " "
		echo "To get it, clone the Squareweave scripts repo:"
		echo "  git clone git@bitbucket.org:Squareweave/scripts.git ~/dev/scripts"
		echo " "
		return
	fi

	# for the throw command, change directory too.
	$HOME/dev/scripts/hira.sh "$@"
	if [ "$1" = "throw" ]
	then
		cd "$HOME/Sites/$2"
	fi
}

export PATH="~/bin:$PATH"

if [ -f `brew --prefix`/etc/bash_completion ]; then
  . `brew --prefix`/etc/bash_completion
fi
